<%= form_for(@sms_campaign) do |f| %>
  <% if @sms_campaign.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@sms_campaign.errors.count, "error") %> prohibited this sms_campaign from being saved:</h2>

      <ul>
      <% @sms_campaign.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :label %><br>
    <%= f.text_field :label %>
  </div>
  <div class="field">
    <%= f.label :originator %><br>
    <%= f.text_field :originator %>
  </div>
  <%= f.fields_for :sms_recipient_list do |rec| %>
    <div class="field">
      <%= rec.label :contacts %><br>
      <%= rec.collection_select :contacts, {}, {}, {}, {},
                                class: 'form-control',
                                multiple: true,
                                autocomplete: 'off',
                                data: { provide: 'typeahead' } %>
    </div>
    <div class="field">
      <%= rec.label :contact_groups %><br>
      <%= rec.collection_select :contact_groups, {}, {}, {}, {},
                                class: 'form-control',
                                multiple: true,
                                autocomplete: 'off',
                                data: { provide: 'typeahead' } %>
    </div>
  <% end %>
  <div class="field">
    <%= f.label :msg_body %><br>
    <%= f.text_area :msg_body %>
  </div>
  <div class="field">
    <%= f.label 'Valid From - To' %><img src="/assets/help.png" class="help-icon" id="campaign-valid-help" alt="Help" /> <br>
    <%= f.select :timezone, @timezones.collect { |tz| [ "(UTC #{tz[:utc_offset]}) #{tz[:friendly]}", tz[:canonical] ] } %> <br>
    <input type="text" name="valid_datetime" id="sms-campaign-valid-datetime" />
    <p class="help-block" id="valid-datetime-help"></p>
    <%= f.hidden_field :start_date %>
    <%= f.hidden_field :end_date %>
  </div>
  <%= f.fields_for :sms_restricted_time_ranges do |time_r| %>
    <div class="field">
      <%= time_r.label 'Restricted Hours' %><img src="/assets/help.png" class="help-icon" id="campaign-restricted-help" alt="Help" />
      <input type="checkbox" id="restricted-hours-switch"><br>
      <%= time_r.time_select :start_time, {minute_step: 15, ignore_date: true}, disabled: true %> -
      <%= time_r.time_select :end_time, {minute_step: 15, ignore_date: true}, disabled: true %>
    </div>
  <% end %>
  <div class="field">
    <%= f.label :encoding, 'Unicode' %><br>
    <%= f.check_box :encoding %>
  </div>
  <div class="field">
    <%= f.label :on_screen, 'Splash' %><br>
    <%= f.check_box :on_screen %>
  </div>
  <div class="actions">
    <%= f.submit class: 'btn btn-primary' %>
  </div>
<% end %>
